# CODE STYLE

本ドキュメントは,コードの書き方および命名規則を定めるものである.

## 目次

- [表記方法](#表記方法)
- [ブランチ](#ブランチ)
- [ディレクトリ](#ディレクトリ)
- [ファイル](#ファイル)
  - [ページコンポーネント](#ページコンポーネント)
  - [Reactコンポーネント](#reactコンポーネント)
  - [ライブラリ](#ライブラリ)
  - [スタイル](#スタイル)
    - [ページ用スタイル](#ページ用スタイル)
    - [コンポーネント用スタイル](#コンポーネント用スタイル)
  - [画像](#画像)
- [インポート](#インポート)
  - [インポート順](#インポート順)
- [エクスポート](#エクスポート)
- [型・インターフェース](#型インターフェース)
- [Hooks](#hooks)
- [関数](#関数)
- [変数](#変数)
- [定数](#定数)
- [スコープ](#スコープ)
- [コードフォーマット](#コードフォーマット)
- [禁止事項・アンチパターン](#禁止事項アンチパターン)
- [例外](#例外)

## 表記方法

本ドキュメントで用いるケース表記を以下の表記に統一する.

| ケース名           | ケース表記      | 説明                                       |
| :----------------- | :-------------- | :----------------------------------------- |
| パスカルケース     | `PascalCase`    | 単語の頭文字のみ大文字にし繋げる           |
| キャメルケース     | `camelCase`     | 先頭以外の単語の頭文字のみ大文字にし繋げる |
| スネークケース     | `snake_case`    | 文字を小文字で揃え単語を`_`で区切る        |
| コンスタントケース | `CONSTANT_CASE` | 文字を大文字で揃え単語を`_`で区切る        |
| ケバブケース       | `kebab-case`    | 文字を小文字で揃え単語を`-`で区切る        |

## ブランチ

- ブランチ名は`<branch-type>/<topic-name>`とする.
- `<branch-type>`ブランチの目的や変更の性質を表し,以下のどれかを用いる.
- ただし,demoページ追加の場合は`feature/demo/<username>`を用いる.
- `<topic-name>`は[kebab-case]を用いてブランチが扱う変更内容を簡潔に表す.

| `<branch-type>` | 用途                 |
| :-------------- | :------------------- |
| feature         | 新機能追加           |
| fix / bugfix    | バグの修正           |
| hotfix          | 本番環境用の緊急修正 |
| refactor        | 内部構造の改善・変更 |
| chore           | 保守作業・整理       |
| test            | 実験・検証           |
| docs            | ドキュメントの更新   |

## ディレクトリ

ディレクトリ名は基本的に[kebab-case]を用いる.

## ファイル

ファイル名はファイルの種類に応じてケース表記を使い分ける.

下記にないものは,基本的に[kebab-case]を用いる.

---

### ページコンポーネント

※ `Next.js App Router` を前提とする.

- ファイル名は`page.tsx`とする.
- `export default function <PageName>Page()`を含むこと.
- `<PageName>`はファイルの親ディレクトリ名を使用し,[PascalCase]を用いる.

---

### Reactコンポーネント

- `function`式を用いる.
- `<ComponentName>`は[PascalCase]を用いる.

コンポーネントファイルを作成する場合,
- ファイル名は`<ComponentName>.tsx`とする.
- 名前付きエクスポートを用いる.
- `export function <ComponentName>()`を含むこと.

---

### ライブラリ

- ファイル名は`<library-name>.ts`とする.
- `<library-name>`は[kebab-case]を用いる.

---

### スタイル

- クラス名は[camelCase]を用いる.

#### ページ用スタイル

- ファイル名は`<page-name>.module.css`とする.
- できるだけ,ページコンポーネントに近い場所に置く.
- 関係のない複数のページコンポーネントには読み込ませない.
- `<page-name>`は[kebab-case]を用いる.

#### コンポーネント用スタイル

- ファイル名は`<ComponentName>.module.css`とする.
- `/src/styles/`に置く.
- `<ComponentName>`は[PascalCase]を用いる.

---

### 画像

- 画像ファイルは`/public/`に置く.
- ファイル名は[kebab-case]を用いる.

## インポート

- ダブルクオーテーション(`"`)を用いる.

コンポーネントの場合,
```js
import { <ComponentName> } from "@/components/<ComponentName>";
```

スタイルの場合,
```js
import styles from "./<page-name>.module.css";
or
import styles from "@/styles/<ComponentName>.module.css";
```

---

### インポート順

1. 外部ライブラリ
   1. React
   2. Next.js
   3. Hooks
   4. その他の外部ライブラリ
2. 内部ファイル
   1. 型ファイル
   2. ライブラリファイル
   3. コンポーネントファイル
   4. スタイルファイル
   5. その他の内部ファイル(`.json`など)

基本的に,同一グループ内ではアルファベット順にする.

## エクスポート

- コンポーネント名の誤字を防ぐため,コンポーネント・関数・型は名前付きエクスポートを基本とする.
- ページコンポーネントのみ`export default`を用いる.

## 型・インターフェース

- 型名・interface名は[PascalCase]を用いる.

## Hooks

- カスタムフック名は`use`から始め,[camelCase]を用いる.

## 関数

[Reactコンポーネントの場合](#reactコンポーネント)

Reactコンポーネントでない場合,
- 関数名は[camelCase]を用いる.
- アロー関数`const <functionName> = () => {}`を用いる.

## 変数

- 変数名は[camelCase]を用いる.
- boolean値の場合は`is`,`has`,`can`から始める.

## 定数

- 定数名は[CONSTANT_CASE]を用いる.

## スコープ

- ファイル内のみで使用される変数・関数は,文脈に即した名前を付ける.
- 過度に汎用的な名前を避ける.

## コードフォーマット

- インデント文字は半角スペース2つを用いる.
- 文字列を表すときにはダブルクオーテーション(`"`)を用いる.
- ファイルの末尾には改行を入れる.

`.ts`・`.tsx`ファイルの場合,
- 文末にセミコロン(`;`)を付ける.
- 複数行の配列・オブジェクト・引数では`trailing comma`を付ける.
- 等価比較は基本的に`===`,`!==`を用いる.
- 変数展開を伴う文字列にはテンプレートリテラルを用いる.

## 禁止事項・アンチパターン

- 似た意味の単語を複数使わない.\
  (UserCard と UserItem が混在するなど)
- 意味のない省略をしない.\
  (usr, cfg, mgr など)
- ただし,一般的な略語は使用可とする.\
  (URL, API, ID など)

## 例外

フレームワークや外部ライブラリの仕様により本規則を適用できない場合は,その仕様を優先する.

# ケース形式 / ケース表記

ケース形式について詳しく紹介しています.

## パスカルケース (PascalCase)

**単語の頭文字のみ大文字にし繋げる.**

`UpperCamelCase`とも.

1970年代に開発されたプログラミング言語「Pascal」において標準的に用いられていた.

## キャメルケース (camelCase)

**1つ目以外の単語の頭文字のみ大文字にし繋げる.**

`lowerCamelCase`とも.

ラクダ(camel)のこぶに見えることから名付けられた.

## スネークケース (snake_case)

**文字を小文字で揃え,空白文字を`_`で置き換える.**

`lower_snake_case`,`アンダースコア記法`とも.

蛇(snake)が地面を這っているように見えることから名付けられた.

## コンスタントケース (CONSTANT_CASE)

**文字を大文字で揃え,空白文字を`_`で置き換える.**

`MACRO_CASE`,`SCREAMING_SNAKE_CASE`,`UPPER_SNAKE_CASE`とも.

その名の通り「定数(CONSTANT)」を定義する際に使われることから名付けられた.

## ケバブケース (kebab-case)

**文字を小文字で揃え,空白文字を`-`で置き換える.**

`lisp-case`,`chain-case`とも.

ハイフンを文字を貫く串に見立てている.

[PascalCase]: #パスカルケース-pascalcase
[camelCase]: #キャメルケース-camelcase
[snake_case]: #スネークケース-snake_case
[CONSTANT_CASE]: #コンスタントケース-constant_case
[kebab-case]: #ケバブケース-kebab-case
